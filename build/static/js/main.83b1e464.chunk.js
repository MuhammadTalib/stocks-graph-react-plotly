(this.webpackJsonpgpct=this.webpackJsonpgpct||[]).push([[0],{1092:function(e,t){},1580:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(143),o=a.n(r),l=(a(757),a(21)),c=a(9),s=a(12),d=a(1655),u=a(190),h=a.n(u),m=a(299),b=a(191),x=a.n(b);x.a.defaults.baseURL="http://3.210.142.92:5000/";var g=function(){var e=Object(m.a)(h.a.mark((function e(t,a,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("post"!==a){e.next=4;break}return e.next=3,x.a.post("".concat(t),n).then((function(e){return e})).catch((function(e){console.log(e)}));case 3:case 6:return e.abrupt("return",e.sent);case 4:return e.next=6,x.a.get("".concat(t)).then((function(e){return e})).catch((function(e){console.log(e)}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),v={dragmode:"pan",margin:{r:10,t:25,b:40,l:20},hovermode:"x",showlegend:!0,legend:{x:0,y:1,traceorder:"normal",font:{family:"sans-serif",size:12,color:"#000"},bgcolor:"#E2E2E211",bordercolor:"#FFFFFF"},xaxis:{domain:[0,1],rangeslider:{visible:!1},autorange:!1,type:"category",tickmode:"array",showspikes:!0,spikemode:"toaxis+across+marker",spikesnap:"cursor",spikethickness:1,spikecolor:"black",spikedash:"dot"},yaxis:{domain:[0,1],autorange:!0,rangeslider:{visible:!1},position:1,side:"bottom",type:"linear",showspikes:!0,spikemode:"toaxis+across+marker",spikesnap:"cursor",spikethickness:1,spikecolor:"black",spikedash:"dot"},opacity:.2,autosize:!0,width:window.innerWidth-10,height:window.innerHeight-80},j=[{name:"1h",desc:"1 Hour",ms:36e5},{name:"2h",desc:"2 Hour",ms:72e5},{name:"4h",desc:"4 Hour",ms:144e5},{name:"6h",desc:"6 Hour",ms:216e5},{name:"8h",desc:"8 Hour",ms:288e5},{name:"12h",desc:"12 Hour",ms:432e5},{name:"18h",desc:"18 Hour",ms:648e5},{name:"1d",desc:"1 Day",ms:864e5},{name:"2d",desc:"2 Day",ms:1728e5},{name:"3d",desc:"3 Day",ms:2592e5},{name:"1wk",desc:"1 Week",ms:6048e5},{name:"2wk",desc:"2 Week",ms:12096e5},{name:"1mo",desc:"1 Month",ms:2629746e3}],f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],p={id:0,name:"T0",merged:{},separate:{}},y={x:[],name:"main",close:[],decreasing:{fillcolor:"black",line:{color:"black",width:1}},high:[],increasing:{fillcolor:"white",line:{color:"black",width:1}},low:[],open:[],type:"candlestick",hoverinfo:"x"},O=[{name:"T0",id:0,merged:{},separate:{},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,1]})}},{name:"T1",id:1,merged:{EMA0:{data:[],xaxis:"x",name:"EMA 20",yaxis:"y",mode:"line",type:"scatter",marker:{size:4,color:"blue"},hoverinfo:"x"},EMA1:{data:[],name:"EMA 22",xaxis:"x",type:"scatter",yaxis:"y",marker:{color:"blue"}},EMA2:{data:[],name:"EMA 26",type:"scatter",xaxis:"x",yaxis:"y",marker:{color:"blue"}}},separate:{"Volume EMA":{data:[],name:"Volume",marker:{color:"#9fa5c5"},yaxis:"y2",hoverinfo:"x",type:"bar",markerFn:function(e,t){return{color:t.open.map((function(e,a){return e<t.close[a]?"green":"red"}))}}}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.3,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.25]})}},{name:"T2",id:2,merged:{EMA0:{data:[],xaxis:"x",name:"EMA 10",yaxis:"y",mode:"line",type:"scatter",marker:{size:4,color:"blue"}},EMA1:{data:[],name:"EMA 11",xaxis:"x",type:"scatter",yaxis:"y",marker:{color:"blue"}},EMA2:{data:[],name:"EMA 13",type:"scatter",xaxis:"x",yaxis:"y",marker:{color:"blue"}},EMA3:{data:[],xaxis:"x",yaxis:"y",name:"EMA 20",marker:{color:"red"}},EMA4:{data:[],name:"EMA 22",xaxis:"x",yaxis:"y",marker:{color:"red"}},EMA5:{data:[],name:"EMA 26",xaxis:"x",yaxis:"y",marker:{color:"red"}}},separate:{},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,1]})}},{name:"T3",id:3,merged:{donchian_price0:{data:[],name:"DONCHIAN AVG",xaxis:"x",yaxis:"y",marker:{color:"blue",size:12},line:{width:1}},donchian_min0:{data:[],name:"DONCHAIN MIN",xaxis:"x",yaxis:"y",marker:{color:"blue"},line:{width:2}},donchian_max0:{data:[],name:"DONCHAIN MAX",xaxis:"x",yaxis:"y",marker:{color:"blue"},line:{width:2}},ema_10:{data:[],name:"EMA 10",xaxis:"x",yaxis:"y",marker:{color:"blue"},line:{width:2}}},separate:{"%R0":{data:[],name:"%R(5)",type:"bar",marker:{color:"blue"},yaxis:"y2"},"%R1":{data:[],name:"%R(20)",type:"bar",marker:{color:"red"},yaxis:"y3"}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.55,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.25,.5]}),yaxis3:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.25]}),xaxis:Object(c.a)({},v.xaxis)}},{name:"T4",id:4,merged:{SMA0:{data:[],name:"MMA 20",xaxis:"x",yaxis:"y",marker:{color:"rgb(255,173,89)"}},SMA1:{data:[],name:"MMA 50",xaxis:"x",yaxis:"y",marker:{color:"rgb(253,91,252)"}},SMA2:{data:[],name:"MMA 100",xaxis:"x",yaxis:"y",marker:{color:"rgb(172,91,170)"}},SMA3:{data:[],name:"MMA 200",xaxis:"x",yaxis:"y",marker:{color:"rgb(89,89,89)"}}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.5,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.3,.45],range:[-5,5],autorange:!1}),yaxis3:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.15,.3]}),yaxis4:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.15]}),xaxis:Object(c.a)({},v.xaxis)},separate:{MACD0:{data:[],name:"MACD LINE",marker:{color:"blue"},xaxis:"x",yaxis:"y2"},MACDSIGNAL0:{data:[],name:"MACD SIGNAL",xaxis:"x",yaxis:"y2",marker:{color:"black"}},MACDHIST0:{data:[],name:"MACD HIST",type:"bar",xaxis:"x",yaxis:"y3",markerFn:function(e){return{color:e.map((function(e,t){return e>0?"green":"red"}))}}},stochd0:{data:[],name:"stochd",marker:{color:"rgb(153,42,173)"},xaxis:"x",yaxis:"y4"},stochk0:{data:[],name:"stochk",xaxis:"x",yaxis:"y4",marker:{color:"rgb(13,0,255)"}},line1:{customLine:20,data:[],mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{dash:"dash",width:2,color:"red"}},line2:{data:[],customLine:80,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}},line3:{data:[],customLine:10,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}},line4:{data:[],customLine:90,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}}}},{name:"T5",id:5,merged:{EMA0:{data:[],name:"EMA 20",xaxis:"x",yaxis:"y",marker:{color:"blue"}},EMA1:{data:[],name:"EMA 50",xaxis:"x",yaxis:"y",marker:{color:"rgb(255,0,56)"}},EMA2:{data:[],name:"EMA 100",xaxis:"x",yaxis:"y",marker:{color:"rgb(13,190,58)"}},EMA3:{data:[],name:"EMA 200",xaxis:"x",yaxis:"y",marker:{color:"black"}}},separate:{MACD0:{data:[],name:"MACD LINE",marker:{color:"blue"},xaxis:"x",yaxis:"y2"},MACDSIGNAL0:{data:[],name:"MACD SIGNAL",xaxis:"x",yaxis:"y2",marker:{color:"black"}},MACDHIST0:{data:[],name:"MACDHIST",type:"bar",xaxis:"x",yaxis:"y3",markerFn:function(e){return{color:e.map((function(e,t){return e>0?"green":"red"}))}}},stochd0:{data:[],name:"stochd",marker:{color:"rgb(153,42,173)"},xaxis:"x",yaxis:"y4"},stochk0:{data:[],name:"stochk",xaxis:"x",yaxis:"y4",marker:{color:"rgb(13,0,255)"}},line1:{customLine:20,data:[],mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{dash:"dash",width:2,color:"red"}},line2:{customLine:80,data:[],mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}},line3:{data:[],customLine:10,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}},line4:{data:[],customLine:90,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y4",line:{color:"red",dash:"dash",width:2}}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.5,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.3,.45]}),yaxis3:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.15,.3]}),yaxis4:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.15]}),xaxis:Object(c.a)({},v.xaxis)}},{name:"T6",id:6,merged:{EMA0:{data:[],name:"EMA 10",xaxis:"x",yaxis:"y",marker:{color:"blue"}},EMA1:{data:[],name:"EMA 11",xaxis:"x",yaxis:"y",marker:{color:"blue"}},EMA2:{data:[],name:"EMA 13",xaxis:"x",yaxis:"y",marker:{color:"blue"}},EMA3:{data:[],name:"EMA 20",xaxis:"x",yaxis:"y",marker:{color:"red"}},EMA4:{data:[],name:"EMA 22",xaxis:"x",yaxis:"y",marker:{color:"red"}},EMA5:{data:[],name:"EMA 26",xaxis:"x",yaxis:"y",marker:{color:"red"}}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.35,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.3]}),xaxis:Object(c.a)({},v.xaxis)},separate:{HIST0:{data:[],type:"bar",name:"HIST0",markerFn:function(e){return{color:e.map((function(e,t){return e>0?"rgb(38,165,154)":"rgb(254,82,82)"}))}},xaxis:"x",yaxis:"y2"}}},{name:"T7",id:7,merged:{EMA0:{data:[],name:"EMA 5",xaxis:"x",yaxis:"y",marker:{color:"blue"}},MA0:{data:[],name:"MA 10",xaxis:"x",yaxis:"y",marker:{color:"black"}},MA1:{data:[],name:"MA 30",xaxis:"x",yaxis:"y",marker:{color:"black"}}},separate:{RSI0:{data:[],name:"RSI(14)",marker:{color:"blue"},xaxis:"x",yaxis:"y2"},line1:{customLine:60,data:[],mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y2",line:{dash:"dashdot",width:2,color:"green"}},line2:{customLine:40,data:[],mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y2",line:{color:"red",dash:"dash",width:2}},stochd0:{data:[],name:"stochd",marker:{color:"rgb(153,42,173)"},xaxis:"x",yaxis:"y3"},stochk0:{data:[],name:"stochk",xaxis:"x",yaxis:"y3",marker:{color:"rgb(13,0,255)"}},line3:{data:[],customLine:10,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y3",line:{color:"blue",dash:"dash",width:2}},line4:{data:[],customLine:90,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y3",line:{color:"blue",dash:"dash",width:2}},line5:{data:[],customLine:20,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y3",line:{color:"blue",dash:"dash",width:2}},line6:{data:[],customLine:80,mode:"lines",xaxis:"x",showlegend:!1,yaxis:"y3",line:{color:"blue",dash:"dash",width:2}}},layout:{yaxis:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.55,1]}),yaxis2:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[.25,.5],range:[20,80],autorange:!1}),yaxis3:Object(c.a)(Object(c.a)({},v.yaxis),{},{domain:[0,.25]}),xaxis:Object(c.a)({},v.xaxis)}}],k=a(2);function w(e){return e.reduce((function(e,t){return Math.min(e,t)}))}var S=function(e,t,a){return console.log("data__>",t),[].concat(Object(l.a)(e?[{x:null===t||void 0===t?void 0:t.x,y:null===t||void 0===t?void 0:t.ConfrimHigh.map((function(e,a){return e?t.high[a]:null})),showlegend:!1,name:null===t||void 0===t?void 0:t.ConfrimHigh.map((function(e,n){return e?"Confirm High "+t.high[a]:null})),mode:"markers",marker:{color:null===t||void 0===t?void 0:t.ConfrimHigh.map((function(e,a){return e?t.is_closed_based[a]?"red":t.real_condition[a]?"black":t.insertion_condition[a]?"green":t.modified_condition[a]?"purple":null:null})),symbol:"diamond"},hoverinfo:"skip"}]:[]),Object(l.a)(e?[{x:null===t||void 0===t?void 0:t.x,y:t.ConfrimLow.map((function(e,a){return e?t.low[a]:null})),showlegend:!1,name:"Confirm Low "+t.low[a],mode:"markers",marker:{color:null===t||void 0===t?void 0:t.ConfrimLow.map((function(e,a){return e?t.is_closed_based[a]?"red":t.real_condition[a]?"black":t.insertion_condition[a]?"green":t.modified_condition[a]?"purple":null:null})),symbol:"diamond"},hoverinfo:"skip"}]:[]))},C=function(e,t,a){var n;return(null===e||void 0===e||null===(n=e[a])||void 0===n?void 0:n[t])?e.is_closed_based[t]?"Closed Based":e.real_condition[t]?"Real Condition":e.insertion_condition[t]?"Insertion Condition":e.modified_condition[t]?"Modified Condition":null:null},_=function(e,t,a,n){var i=[];return 6===e.id&&(i=[Object(c.a)(Object(c.a)({},y),{},{type:n,name:"Red price",high:t.elder_impulse_system&&t.elder_impulse_system.length?t.realHigh&&t.realHigh.map((function(e,a){return t.elder_impulse_system[a]?1===t.elder_impulse_system[a].is_red?e:null:e})):t.realHigh,low:t.low,open:t.open,close:t.close,decreasing:{fillcolor:"red",line:{color:"ohlc"===n?"red":"black",width:1}},increasing:{fillcolor:"red",line:{color:"ohlc"===n?"red":"black",width:1}},x:t.x,ConfrimHigh:t.ConfrimHigh,ConfrimLow:t.ConfrimLow,patternData:t.patternData}),Object(c.a)(Object(c.a)({},y),{},{type:n,name:"Green price",high:t.elder_impulse_system&&t.elder_impulse_system.length?t.realHigh&&t.realHigh.map((function(e,a){return t.elder_impulse_system[a]?1===t.elder_impulse_system[a].is_green?e:null:e})):t.realHigh,low:t.low,open:t.open,close:t.close,decreasing:{fillcolor:"green",line:{color:"ohlc"===n?"green":"black",width:1}},increasing:{fillcolor:"green",line:{color:"ohlc"===n?"green":"black",width:1}},x:t.x,ConfrimHigh:t.ConfrimHigh,ConfrimLow:t.ConfrimLow,patternData:t.patternData})]),e.merged&&Object.keys(e.merged).length?[].concat(Object(l.a)(i),Object(l.a)(Object.keys(e.merged).map((function(n){return Object(c.a)(Object(c.a)({},e.merged[n]),{},{x:null===t||void 0===t?void 0:t.x,y:e.merged[n].data.map((function(e){return e||null})),name:"".concat(e.merged[n].name," ").concat(e.merged[n].data[a]),hoverinfo:"x"})})))):[]},M=function(e,t,a){return e.separate&&Object.keys(e.separate).length?Object(l.a)(Object.keys(e.separate).map((function(n){return Object(c.a)(Object(c.a)(Object(c.a)({},e.separate[n]),{},{x:null===t||void 0===t?void 0:t.x,y:e.separate[n].data.map((function(e){return e||null}))},e.separate[n].markerFn?{marker:e.separate[n].markerFn(e.separate[n].data,t)}:{}),{},{name:"".concat(e.separate[n].name," ").concat(e.separate[n].data[a]),hoverinfo:"x"})}))):[]},D=function(e,t){var a=e&&t.patternData.findLastIndex((function(e){return Object.values(e).includes(1)}));return e&&a>=0?[{type:"rect",text:"ddd",x0:a-.5,y0:0,x1:a+.5,yref:"paper",y1:1,line:{color:"#ffff00",width:1.5},hoverinfo:"x",fillcolor:"#ffff00",opacity:.6}]:[]},L=function(e,t){return e?t.x.slice(0,t.x.length-23).map((function(e,a){var n=new Date(e).getDate(),i=new Date(t.x[a-1]).getDate(),r=new Date(t.x[a-2]).getDate();return 1===n||2===n&&1!==i||3===n&&1!==r&&2!==i?{type:"line",text:"ddd",x0:String(e),y0:0,x1:String(e),yref:"paper",y1:1,line:{color:"grey",width:1.5,dash:"dot"},hoverinfo:"x"}:null})):[]};var T=function(e,t,a){var n=e&&e.length&&Object.keys(e[0]).filter((function(e){return!["trigger","trigger_failure","trigger_failure_value","trigger_value"].find((function(t){return t===e}))})),i="";return e.length&&Array.isArray(n)&&n.forEach((function(n,r){var o,l,c;("T3 Down"===a?(null===e||void 0===e||null===(o=e[t])||void 0===o?void 0:o.pattern_end)&&(null===e||void 0===e||null===(l=e[t])||void 0===l?void 0:l[n])&&"pattern_end"!==n:null===e||void 0===e||null===(c=e[t])||void 0===c?void 0:c[n])&&(i.length>0&&(i+=", "),i+=n)})),i},A=a(235),E=function(e,t,a){var n,i,r;if("All Failure Patterns"===t)return[];var o=e.patternData;if("All Reversal Patterns"===t||"T3 Down"===t||"All High/Low Patterns"===t||a){var l;o=e.patternData&&e.patternData[0];var c=(null===e||void 0===e?void 0:e.pattern_name_list)||(null===(l=o&&Object.keys(o))||void 0===l?void 0:l.filter((function(e){return!["trigger","trigger_failure","trigger_failure_value","trigger_value"].find((function(t){return t===e}))})));o=e.patternData.map((function(e){var a=0;if(Array.isArray(c)){var n,i=Object(A.a)(c);try{for(i.s();!(n=i.n()).done;){if(e[n.value]){a="T3 Down"===t?null===e||void 0===e?void 0:e.pattern_end:1;break}}}catch(r){i.e(r)}finally{i.f()}}return a}))}return(null===(n=o)||void 0===n?void 0:n.length)?[{x:null===e||void 0===e?void 0:e.x,y:null===(i=o)||void 0===i?void 0:i.map((function(t,a){var n=(e.max-e.min)/100*2.5;return t?e.close[a]>e.open[a]?Number(e.low[a])-n:Number(e.high[a])+n:null})),showlegend:!1,mode:"markers",marker:{color:null===(r=o)||void 0===r?void 0:r.map((function(a,n){return a?"All High/Low Patterns"===t||e.close[n]<e.open[n]?"red":"green":null})),symbol:o.map((function(a,n){return a?"All High/Low Patterns"===t?"x":e.close[n]<e.open[n]?"triangle-down":"triangle-up":null})),size:7},hoverinfo:"skip"}]:[]},H=function(e,t){var a,n,i,r,o,l=e.patternTrigger;if(t){var c,s=e.pattern_name_list||(null===(c=l&&Object.keys(l))||void 0===c?void 0:c.filter((function(e){return!["trigger","trigger_failure","trigger_failure_value","trigger_value"].find((function(t){return t===e}))})));l=e.patternTrigger.map((function(e){var t=null;if(Array.isArray(s)){var a,n=Object(A.a)(s);try{for(n.s();!(a=n.n()).done;){var i,r=a.value;if(null===(i=e[r])||void 0===i?void 0:i.trigger){t=e[r];break}}}catch(o){n.e(o)}finally{n.f()}}return t}))}return(null===(a=l)||void 0===a?void 0:a.length)?[{x:null===e||void 0===e?void 0:e.x,y:null===(n=l)||void 0===n?void 0:n.map((function(e,t){return(null===e||void 0===e?void 0:e.trigger)?Number(e.trigger_value):null})),showlegend:!1,mode:"markers",marker:{color:null===(i=l)||void 0===i?void 0:i.map((function(e,t){return(null===e||void 0===e?void 0:e.trigger)?"red":null})),symbol:l.map((function(e,t){return(null===e||void 0===e?void 0:e.trigger)?"x":null})),size:7},hoverinfo:"skip"},{x:null===e||void 0===e?void 0:e.x,y:null===(r=l)||void 0===r?void 0:r.map((function(t,a){var n=(e.max-e.min)/100*2.5;return(null===t||void 0===t?void 0:t.trigger_failure)?e.close[a]>e.open[a]?(null===t||void 0===t?void 0:t.trigger_failure_value)-n:t.trigger_failure_value+n:null})),showlegend:!1,mode:"markers",marker:{color:null===(o=l)||void 0===o?void 0:o.map((function(t,a){return(null===t||void 0===t?void 0:t.trigger_failure)?e.close[a]<e.open[a]?"red":"green":null})),symbol:l.map((function(t,a){return(null===t||void 0===t?void 0:t.trigger_failure)?e.close[a]<e.open[a]?"triangle-down":"triangle-up":null})),size:7},hoverinfo:"skip"}]:[]},F=a(728),I=a(731),W=a.n(I),B=(a(293),W()(F)),z=function(e){var t,a=e.data,i=e.layout,r=e.templates,o=e.loader,d=e.separateGraphs,u=e.onHover,h=e.onUnhover,m=e.onClick,b=e.toggleFirstDayLine,x=e.onDoubleClick,g=e.id,v=e.setLayout,j=e.dualChartWidth,f=e.sidebarWidth,p=e.selectedStrategy;null===(t=document.querySelector('[data-title="Autoscale"]'))||void 0===t||t.addEventListener("onclick",(function(e){}));var y=Object(n.useState)([]),O=Object(s.a)(y,2),w=O[0],S=O[1];return Object(n.useEffect)((function(){var e=[];(null===d||void 0===d?void 0:d.length)&&d.forEach((function(t){var a,n;e.push(t),(null===t||void 0===t||null===(a=t.templates)||void 0===a?void 0:a.length)&&(null===(n=t.templates)||void 0===n||n.forEach((function(t){e.push(t)})))})),S(e)}),[d]),o?Object(k.jsx)("div",{className:"loadingLabel",children:"Loading..."}):Object(k.jsx)(B,{id:g,onClick:m,onDoubleClick:x,onHover:u,onUnhover:h,data:[a].concat(Object(l.a)(r||[]),Object(l.a)(w)),layout:Object(c.a)(Object(c.a)({},i),{},{shapes:[].concat(Object(l.a)(L(b,a)),Object(l.a)(p.length<2?D(a.strategiesData,a):[]))}),config:{scrollZoom:!0},useResizeHandler:!0,onRelayout:function(e){e["xaxis.autorange"]&&v(Object(c.a)(Object(c.a)({},i),{},{xaxis:Object(c.a)(Object(c.a)({},i.xaxis),{},{autorange:!1,range:[a.x.length-280,a.x.length-1]}),width:window.innerWidth-j-f,shapes:[].concat(Object(l.a)(L(b,a)),Object(l.a)(D(a.strategiesData,a)))}))}})},N=function(e){var t=e.selectedStock,a=e.ohlc,n=a.high,i=a.low,r=a.open,o=a.close,l=a.ConfrimLow,c=a.ConfrimHigh,s=e.selectedPattern,d=e.selectedTime,u=e.patternTrigger;return Object(k.jsxs)("div",{style:{marginLeft:"10px",fontSize:"12px"},children:[t&&Object(k.jsxs)("div",{children:[t.name," - ",t.description||"description"," - ",t.sources.length&&String(t.sources[0]).toUpperCase()," - ",d.desc]}),Object(k.jsxs)("div",{children:["Open: ",r," High: ",n," Low: ",i," Close: ",o]}),s||u?Object(k.jsxs)("div",{children:["Pattern: ",s]}):Object(k.jsx)(k.Fragment,{}),l?Object(k.jsxs)("div",{children:["Confirm Low: ",l," - ",i]}):Object(k.jsx)(k.Fragment,{}),c?Object(k.jsxs)("div",{children:["Confirm High: ",c," - ",n]}):Object(k.jsx)(k.Fragment,{})]})};function R(e){var t,a,i,r=e.onHover,o=e.onUnhover,d=e.onClick,u=e.pointIndex,b=e.graphType,v=e.style,j=e.layout,p=e.toggleFirstDayLine,O=e.switchToggle,D=e.selectedTemp,L=e.selectedPattern,A=e.type,F=e.onDoubleClick,I=e.selectedStock,W=e.selectedTime,B=e.selectedCategory,R=e.id,P=e.setLayout,U=e.selectedStrategy,G=e.enableDualChart,X=e.sidebarWidth,V=e.dualChartWidth,q=e.dataBaseUrl,J=e.setStrategiesData,K=e.strategiesData,Y=Object(n.useState)(Object(c.a)({},y)),Z=Object(s.a)(Y,2),$=Z[0],Q=Z[1],ee=Object(n.useState)(D),te=Object(s.a)(ee,2),ae=te[0],ne=te[1];Object(n.useEffect)((function(){ne(D)}),[D]);var ie=Object(n.useState)(!1),re=Object(s.a)(ie,2),oe=re[0],le=re[1],ce=Object(n.useRef)(),se=function(e,t,a,n,i,r,o,s,d,u,b,v,j){return function(){var p=Object(m.a)(h.a.mark((function m(p,O,k,S,C,_){var M,D,L,T,A,E,H,F,I;return h.a.wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(null===(M=document.querySelector('[data-title="Autoscale"]'))||void 0===M||M.click(),!(E=null===b||void 0===b?void 0:b.length)){h.next=12;break}return H=b[E-1],t(!0),h.next=7,x.a.get("stocks/get_strategy_watchlist?watch_list=".concat(e,"&interval=").concat(O.name,"&strategy_name=").concat(H));case 7:F=h.sent,t(!1),v(Object(l.a)(new Map([].concat(Object(l.a)(j),[{data:F.data.data,name:H}]).map((function(e){return[e.name,e]}))).values()).filter((function(e){return b.includes(e.name)}))),h.next=13;break;case 12:v(j.filter((function(e){return b.find((function(t){return t===e.name}))})));case 13:if(e&&(null===p||void 0===p?void 0:p.name)&&!(null===p||void 0===p?void 0:p.selectedSource)){h.next=15;break}return h.abrupt("return");case 15:return t(!0),I=E>0?"stocks/strategy_data_against_symbol":"stocks".concat(u||"","?category=").concat(e,"&symbol=").concat(null===(D=p.name)||void 0===D?void 0:D.toLowerCase(),"&source=").concat((null===p||void 0===p?void 0:p.selectedSource)||(null===p||void 0===p||null===(L=p.sources)||void 0===L?void 0:L.length)&&p.sources[0],"&interval=").concat(O.name),E<=0&&(k&&(null===k||void 0===k?void 0:k.id)>0&&(I+="&template=".concat(k.id)),(null===S||void 0===S?void 0:S.length)&&(I+="&pattern=".concat(S)),C&&(I+="&meta_template=".concat(C))),h.next=20,g(I,E?"post":null,{watch_list:e,interval:O.name,symbol:null===(T=p.name)||void 0===T?void 0:T.toLowerCase(),strategies:b,source:(null===p||void 0===p?void 0:p.selectedSource)||(null===p||void 0===p||null===(A=p.sources)||void 0===A?void 0:A.length)&&p.sources[0]}).then((function(e){var u,h;t(!1);var m=null===(u=e.data)||void 0===u?void 0:u.patterns_list,x=Object(l.a)(null===e||void 0===e||null===(h=e.data)||void 0===h?void 0:h.data),g=[],v=[],j=[],p=[],M=[],D=[],L=[],T=[],A=[],E=[],H=[],F=[],I=[],W=[],B=k&&k.merged,z=B;Object.keys(B).length&&Object.keys(B).forEach((function(e){z[e].data=[]}));var N=k&&k.separate,R=N;Object.keys(N).length&&Object.keys(N).forEach((function(e){R[e].data=[]})),null===x||void 0===x||x.forEach((function(e,t){var a,n,i,r,o=e;if(g.push(o.high),v.push(o.low),j.push(o.open),p.push(o.close),M.push(new Date(o.date).toUTCString()),C&&(A.push(o["meta-indicators"]["Confrim High"]),E.push(o["meta-indicators"]["Confrim Low"]),I.push(o.insertion_condition),F.push(o.is_closed_based),H.push(o.real_condition),W.push(o.modified_condition)),void 0===(null===(a=o[S])||void 0===a?void 0:a.pattern_end)&&void 0===(null===(n=o[S])||void 0===n?void 0:n.trigger_value)||void 0===(null===(i=o[S])||void 0===i?void 0:i.trigger)||"All High/Low Patterns"===S)void 0!==o[S]&&D.push(o[S]);else{var s,d,u,h,x,f,y,O,w={trigger:null===(s=o[S])||void 0===s?void 0:s.trigger,trigger_value:null===(d=o[S])||void 0===d?void 0:d.trigger_value,trigger_value_max:null===(u=o[S])||void 0===u?void 0:u.trigger_value_max,trigger_value_min:null===(h=o[S])||void 0===h?void 0:h.trigger_value_min};(null===(x=o[S])||void 0===x?void 0:x.trigger_failure)&&(w=Object(c.a)(Object(c.a)({},w),{},{trigger_failure:null===(f=o[S])||void 0===f?void 0:f.trigger_failure,trigger_failure_value:null===(y=o[S])||void 0===y?void 0:y.trigger_failure_value})),"All Failure Patterns"===S||"T3 Down"===S?D.push(o[S]):D.push(null===(O=o[S])||void 0===O?void 0:O.pattern_end),L.push(w)}if(b.length){var _={},P={};m.forEach((function(e){var t,a,n,i,r,l,c,s;void 0===(null===(t=o[e])||void 0===t?void 0:t.pattern_end)&&void 0===(null===(a=o[e])||void 0===a?void 0:a.trigger_value)||void 0===(null===(n=o[e])||void 0===n?void 0:n.trigger)||(P[e]={trigger:null===(i=o[e])||void 0===i?void 0:i.trigger,trigger_value:null===(r=o[e])||void 0===r?void 0:r.trigger_value,trigger_value_max:null===(l=o[e])||void 0===l?void 0:l.trigger_value_max,trigger_value_min:null===(c=o[e])||void 0===c?void 0:c.trigger_value_min},_[e]=null===(s=o[e])||void 0===s?void 0:s.pattern_end)})),D.push(Object(c.a)({},_)),L.push(Object(c.a)({},P))}k&&(B&&Object.keys(B).length&&Object.keys(B).forEach((function(e){z[e].data=[].concat(Object(l.a)(z[e].data),[o.indicators[e]])})),N&&Object.keys(N).length&&Object.keys(N).forEach((function(e){R[e].data=[].concat(Object(l.a)(R[e].data),[R[e].customLine?R[e].customLine:o.indicators[e]])})),6===k.id&&T.push(null===(r=o.indicators)||void 0===r?void 0:r.elder_impulse_system))}));for(var P,U=Object(c.a)(Object(c.a)({},a),k.layout),G=0;G<23;G++)g.push(null),v.push(null),j.push(null),p.push(null),M.push(new Date(Date.now(M[M.length-1])+(G+1)*O.ms).toUTCString()),k&&(B&&Object.keys(B).forEach((function(e){z[e].data=[].concat(Object(l.a)(z[e].data),[null])})),N&&Object.keys(N).forEach((function(e){R[e].data=[].concat(Object(l.a)(R[e].data),[null])})));k&&n(Object(c.a)(Object(c.a)({},k),{},{merged:z,separate:R})),i(Object(c.a)(Object(c.a)({},y),{},{realHigh:g,high:T.length?g.map((function(e,t){return T[t]?1!==T[t].is_red||1!==T[t].is_green?e:null:e})):g,low:v,open:j,close:p,x:M,hovertext:g,increasing:6===k.id?{fillcolor:"blue",line:{color:"ohlc"===o?"blue":"black",width:1}}:y.increasing,decreasing:6===k.id?{fillcolor:"blue",line:{color:"ohlc"===o?"blue":"black",width:1}}:y.decreasing,ConfrimHigh:A,ConfrimLow:E,patternData:D,patternTrigger:L,pattern_name_list:b.length>0?[].concat(Object(l.a)((null===_||void 0===_?void 0:_.pattern_name_list)||[]),Object(l.a)(m||[])):null,strategiesData:!!b.length,elder_impulse_system:T,max:(P=g,P.reduce((function(e,t){return Math.max(e,t)}))),min:w(v.filter((function(e){return 0!==e&&null!==e}))),insertion_condition:I,is_closed_based:F,real_condition:H,modified_condition:W})),r(Object(c.a)(Object(c.a)({},U),{},{width:s?(window.innerWidth-d)/2:window.innerWidth-d,dualChartSet:s,height:window.innerHeight-80,xaxis:Object(c.a)(Object(c.a)({},a.xaxis),{},{rangeslider:{visible:!1},autorange:!1,range:[M.length-280,M.length-1],tickvals:Object(l.a)(M.filter((function(e,t){return t%15===0}))),ticktext:Object(l.a)(M.filter((function(e,t){return t%15===0})).map((function(e){var t=new Date(e);return f[t.getMonth()]+" "+t.getUTCFullYear()})))}),shapes:Object(l.a)(g.map((function(e,t){if(D[t]){var a=Math.min.apply(Math,[v[t],g[t],j[t],p[t]]),n=Math.max.apply(Math,[v[t],g[t],j[t],p[t]]);return{type:"rect",xref:"x",yref:"y",x0:String(new Date(M[t-1]).toUTCString()),y0:a,x1:String(new Date(M[t+1]).toUTCString()),width:1,y1:n,fillcolor:"yellow",opacity:.6,rightMargin:3,line:{width:2,color:j[t]<p[t]?"green":"red",opacity:1},hoverinfo:"x"}}return null})))}))})).catch((function(e){console.log("err",e),t(!1),i(null)}));case 20:case"end":return h.stop()}}),m)})));return function(e,t,a,n,i,r){return p.apply(this,arguments)}}()}(B,le,j,ne,Q,P,b,G,X,q,U,J,K);return Object(n.useEffect)((function(){var e=!0;I!==ce.current&&(e=!1),ce.current=I,W&&se(I,W,ae,L,O,$,e)}),[I,W,B,L,O,ae.id,b,G,U]),$&&(null===$||void 0===$||null===(t=$.x)||void 0===t?void 0:t.length)?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(N,{selectedStock:I,ohlc:{high:$.high[u],low:$.low[u],open:$.open[u],close:$.close[u],ConfrimHigh:C($,u,"ConfrimHigh"),ConfrimLow:C($,u,"ConfrimLow")},selectedPattern:($.patternData[u]?"All Reversal Patterns"===L||"All Failure Patterns"===L||"T3 Down"===L||"All High/Low Patterns"===L||$.strategiesData?T($.patternData,u,L):L:void 0)||((null===$||void 0===$||null===(a=$.patternTrigger[u])||void 0===a?void 0:a.trigger_failure)?L:void 0),patternTrigger:null===$||void 0===$||null===(i=$.patternTrigger[u])||void 0===i?void 0:i.trigger_failure,selectedTime:W,pointIndex:u,data:$}),Object(k.jsx)(z,{id:R,onHover:r,onUnhover:o,onClick:d,onDoubleClick:function(){return F(A)},style:Object(c.a)(Object(c.a)({},v),{},{border:"1px solid red"}),data:Object(c.a)(Object(c.a)({},$),{},{type:b}),layout:j,toggleFirstDayLine:p,templates:[].concat(Object(l.a)(_(ae,$,u,b)),Object(l.a)(S(O,$,u)),Object(l.a)(E($,L,$.strategiesData)||[]),Object(l.a)(H($,$.strategiesData)||[])),separateGraphs:Object(l.a)(M(ae,$,u)),loader:oe,setLayout:P,dualChartWidth:V,sidebarWidth:X,selectedStrategy:U})]}):Object(k.jsx)(k.Fragment,{})}var P={width:"100%",height:"100%"},U=function(e){var t=e.layout,a=e.enableDualChart,r=e.graphType,o=e.selectedTemp,l=e.separateGraphs,d=e.toggleFirstDayLine,u=e.switchToggle,h=e.selectedPattern,m=e.setLayout,b=e.selectedStock,x=e.selectedTime,g=e.selectedCategory,v=e.selectedStrategy,j=e.sidebarWidth,f=e.secondaryLayout,p=e.setSecondaryLayout,y=e.dataBaseUrl,O=e.setStrategiesData,w=e.strategiesData,S=Object(n.useState)(null),C=Object(s.a)(S,2),_=C[0],M=C[1];Object(n.useEffect)((function(){var e=function(e){switch(e.name){case"1d":case"2d":case"3d":return{name:"1wk",desc:"1 Week",ms:6048e5};case"1wk":case"2wk":return{name:"1mo",desc:"1 Month",ms:2629746e3};default:return{name:"1d",desc:"1 Day",ms:864e5}}}(x);M(a?e:x)}),[x,a]);var D=Object(n.useState)("crosshair"),L=Object(s.a)(D,2),T=L[0],A=L[1],E=Object(n.useState)(""),H=Object(s.a)(E,2),F=H[0],I=H[1],W=Object(n.useState)(1),B=Object(s.a)(W,2),z=B[0],N=B[1],U=function(e){var t=Object(s.a)(e.points,1)[0];N(t.pointIndex),A("crosshair")},G=function(){A("crosshair")},X=function(){A("grabbing")},V=Object(n.useRef)(null),q=Object(n.useState)(!1),J=Object(s.a)(q,2),K=J[0],Y=J[1],Z=Object(n.useState)(0),$=Object(s.a)(Z,2),Q=$[0],ee=$[1],te=i.a.useCallback((function(){Y(!1)}),[]),ae=i.a.useCallback((function(e){Y(!0)}),[]),ne=i.a.useCallback((function(e){if(K){var a;null===(a=document.querySelector('[data-title="Autoscale"]'))||void 0===a||a.click();var n=window.innerWidth-(V.current.getBoundingClientRect().right-e.clientX)-10;m(Object(c.a)(Object(c.a)({},t),{},{width:n,height:window.innerHeight-80})),p(Object(c.a)(Object(c.a)({},f),{},{width:V.current.getBoundingClientRect().right-e.clientX-10,height:window.innerHeight-80})),ee(V.current.getBoundingClientRect().right-e.clientX)}}),[K,j]);return Object(n.useEffect)((function(){return window.addEventListener("mousemove",ne),window.addEventListener("mouseup",te),function(){window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",te)}}),[ne,te]),t?Object(k.jsxs)("div",{style:{display:"flex"},children:[Object(k.jsx)("div",{style:{height:"100vh",overflowY:"hidden",overflowX:"hidden"},children:Object(k.jsx)("div",{id:"default-chart",style:{cursor:T,marginTop:"52px",border:"default"===F?"4px solid #438695":"none"},children:Object(k.jsx)(R,{type:"default",onHover:U,onDoubleClick:function(e){return I(e)},onUnhover:G,onClick:X,pointIndex:z,graphType:r,style:P,enableDualChart:a,selectedTemp:o,layout:t,toggleFirstDayLine:d,switchToggle:u,selectedPattern:h,separateGraphs:l,selectedStock:b,id:"default",selectedTime:_,selectedCategory:g,setLayout:m,selectedStrategy:v,sidebarWidth:j,dualChartWidth:Q,dataBaseUrl:y,setStrategiesData:O,strategiesData:w})})}),a&&Object(k.jsxs)("div",{ref:V,className:"app-dualchart",style:{width:f.width+10+"px",marginTop:"52px"},onMouseDown:function(e){return e.preventDefault()},children:[Object(k.jsx)("div",{className:"app-dualchart-resizer",onMouseDown:ae}),Object(k.jsx)("div",{className:"app-dualchart-content",children:Object(k.jsx)("div",{id:"secondary-chart",style:{cursor:T,border:"secondary"===F?"4px solid #438695":"none"},children:Object(k.jsx)(R,{type:"secondary",onHover:U,onDoubleClick:function(e){return I(e)},graphType:r,style:P,enableDualChart:a,selectedTemp:o,layout:f,toggleFirstDayLine:d,switchToggle:u,selectedPattern:h,onUnhover:G,onClick:X,pointIndex:z,separateGraphs:l,selectedStock:b,id:"secondary",selectedTime:x,selectedCategory:g,setLayout:p,selectedStrategy:v,sidebarWidth:j,dualChartWidth:Q,dataBaseUrl:y,setStrategiesData:O,strategiesData:w})})})]})]}):Object(k.jsx)(k.Fragment,{})},G=a(1659),X=a(1658),V=a(1665),q=a(1662),J=a(1661),K=a(307),Y=a(1664),Z=a(1653),$=a(1654),Q=function(e){return Object(k.jsx)(Y.a,Object(c.a)({elevation:8},e))},ee=function(e){var t=e.options,a=e.value,i=e.label,r=e.handleChange,o=e.selectedStock,d=e.getOptionLabel,u=e.renderOption,h=e.multiple,m=e.renderInput,b=Object(n.useState)(!1),x=Object(s.a)(b,2),g=x[0],v=x[1],j=Object(n.useRef)(null);Object(n.useEffect)((function(){v(!1)}),[o]);return Object(k.jsx)("div",{ref:j,onMouseLeave:function(){v(!1)},children:Object(k.jsx)(Z.a,{onKeyPress:function(e){(38===e.keyCode||40===e.keyCode)&&v(!1)},selectOnFocus:!1,blurOnSelect:"touch",onChange:function(e,t){r(t)},fullWidth:!0,multiple:!!h,open:g,options:Object(l.a)(t),onBlur:function(){v(!1)},onMouseLeave:function(){j.current.click()},onKeyDown:function(){v(!0)},onClick:function(){v(!0)},value:a,defaultValue:t.find((function(e){return e[0]})),PaperComponent:Q,getOptionLabel:d&&d,renderOption:u&&u,renderInput:m||function(e){return Object(k.jsx)($.a,Object(c.a)(Object(c.a)({},e),{},{label:i,variant:"standard",onClick:function(){v(!g)}}))}})})},te=function(e){var t=e.handleGrapthType,a=e.graphType,i=e.templateChange,r=e.setEnableDualChart,o=e.enableDualChart,l=e.handlePatternChange,c=e.selectedTime,d=e.hanldeSelectedTime,u=e.selectedTemp,h=e.selectedPattern,m=e.handlSwitchToggle,b=e.switchToggle,x=e.toggleFirstDayLine,v=e.setToggleFirstDayLine,f=e.selectedStock,p=e.dataBaseUrl,y=Object(n.useRef)(),w=Object(n.useState)([]),S=Object(s.a)(w,2),C=S[0],_=S[1];return Object(n.useEffect)((function(){g("stocks/patterns").then((function(e){var t;_((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.list)||[])}))}),[]),Object(k.jsxs)(G.a,{container:!0,spacing:2,style:{position:"fixed",padding:"10px"},children:[Object(k.jsx)(G.a,{item:!0,md:2,sm:6,xs:12,children:Object(k.jsx)(ee,{options:C,value:h,label:"Pattern",handleChange:l,selectedStock:f})}),Object(k.jsx)(G.a,{item:!0,md:1,sm:6,xs:12,children:Object(k.jsx)(X.a,{control:Object(k.jsx)(V.a,{disabled:"1d"!==c.name,checked:x,onChange:function(e){v(e.target.checked)}}),label:"1st"})}),Object(k.jsx)(G.a,{item:!0,md:1,sm:2,xs:3,children:Object(k.jsxs)(J.a,{variant:"text","aria-label":"text button group",children:[Object(k.jsx)(q.a,{className:"btn ".concat("ohlc"!==a?"templateBtn":""),onClick:function(){return t("candlestick")},children:Object(k.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"24",height:"24",fill:"currentColor",children:[Object(k.jsx)("path",{d:"M17 11v6h3v-6h-3zm-.5-1h4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .5-.5z"}),Object(k.jsx)("path",{d:"M18 7h1v3.5h-1zm0 10.5h1V21h-1z"}),Object(k.jsx)("path",{d:"M9 8v12h3V8H9zm-.5-1h4a.5.5 0 0 1 .5.5v13a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5v-13a.5.5 0 0 1 .5-.5z"}),Object(k.jsx)("path",{d:"M10 4h1v3.5h-1zm0 16.5h1V24h-1z"})]})}),Object(k.jsx)(q.a,{className:"btn ".concat("ohlc"===a?"templateBtn":""),onClick:function(){return t("ohlc")},children:Object(k.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28",width:"24",height:"24",children:Object(k.jsx)("g",{fill:"none",stroke:"currentColor","stroke-linecap":"square",children:Object(k.jsx)("path",{d:"M10.5 7.5v15M7.5 20.5H10M13.5 11.5H11M19.5 6.5v15M16.5 9.5H19M22.5 16.5H20"})})})})]})}),Object(k.jsx)(G.a,{item:!0,md:2,children:Object(k.jsx)(ee,{options:["0",1,2,3,4],value:b,label:"MT4",handleChange:m,selectedStock:f,getOptionLabel:function(e){return e}})}),Object(k.jsx)(G.a,{item:!0,xs:2,children:Object(k.jsx)(ee,{options:j,value:c,label:"Time",handleChange:d,selectedStock:f,getOptionLabel:function(e){return e?null===e||void 0===e?void 0:e.name:""}})}),Object(k.jsx)(G.a,{item:!0,md:4,xs:4,children:O.length>0?Object(k.jsxs)(J.a,{variant:"text","aria-label":"text button group",children:[O.map((function(e,t){return Object(k.jsx)(q.a,{onClick:function(){return i(e)},className:"btn ".concat(u.id===e.id?"templateBtn":""),children:e.name},t)})),Object(k.jsx)(q.a,{onClick:function(){var e;r(!o),null===(e=document.querySelector('[data-title="Autoscale"]'))||void 0===e||e.click()},className:"btn ".concat(o?"templateBtn":""),children:"Dual Chart"}),"/db_v1"!==p?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(K.b,{style:{display:"none"},ref:y,target:"_blank",to:"/db_v1"}),Object(k.jsx)(q.a,{onClick:function(){y.current.click()},children:" "})]}):Object(k.jsx)(q.a,{})]}):Object(k.jsx)(k.Fragment,{})})]})},ae=a(734),ne=a.n(ae),ie=a(733),re=a.n(ie),oe=a(1657);function le(e,t,a){return(null===t||void 0===t?void 0:t[a])<(null===e||void 0===e?void 0:e[a])?-1:(null===t||void 0===t?void 0:t[a])>(null===e||void 0===e?void 0:e[a])?1:0}var ce=a(1660),se=a(1671),de=a(1669),ue=a(1672),he=a(1667),me=a(1668),be=a(1670),xe=a(1666),ge=a(1650),ve=function(e){var t,a=e.row,n=e.index,i=e.selectedStock,r=e.handleStockChange,o=e.selectedTime,l=e.placeSelectedItemInTheMiddle,c=e.setSelectStockIndex,s=e.hanldeSelectedTime,d=(e.selectedStrategy,e.strategiesData);return a&&i?Object(k.jsxs)(xe.a,{className:a.name===i.name?"selectedRowStyle":"",active:a.name===i.name,onClick:function(){s(o),l(n),r(a),c(n)},focus:a.name===i.name,children:[Object(k.jsx)(he.a,{align:"center",children:a.name}),Object(k.jsx)(he.a,{align:"center",children:(null===a||void 0===a||null===(t=a.sources)||void 0===t?void 0:t.length)&&a.sources[0]}),Object(k.jsx)(he.a,{align:"center",children:(null===a||void 0===a?void 0:a.description)||"-"}),Object(k.jsx)(he.a,{align:"center",children:o.name}),d.map((function(e,t){var n,i,r,o,l,c,s,d,u,h,m,b;return(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(i=n[null===a||void 0===a?void 0:a.name])||void 0===i?void 0:i.value)&&"temp"!==(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(o=r[null===a||void 0===a?void 0:a.name])||void 0===o?void 0:o.value)?Object(k.jsxs)(he.a,{align:"center",children:["temp"!==(null===e||void 0===e||null===(l=e.data)||void 0===l||null===(c=l[null===a||void 0===a?void 0:a.name])||void 0===c?void 0:c.value)?(null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s[null===a||void 0===a?void 0:a.name])||void 0===d?void 0:d.value)+", ":" ","temp"!==(null===e||void 0===e||null===(u=e.data)||void 0===u||null===(h=u[null===a||void 0===a?void 0:a.name])||void 0===h?void 0:h.time)?null===e||void 0===e||null===(m=e.data)||void 0===m||null===(b=m[null===a||void 0===a?void 0:a.name])||void 0===b?void 0:b.time:" "]},t):Object(k.jsx)(k.Fragment,{})}))]},n):Object(k.jsx)(k.Fragment,{})},je=function(e){var t=e.height,a=e.scrollableListRef,n=e.selectedStrategy,i=e.orderBy,r=e.createSortHandler,o=e.order,c=e.placeSelectedItemInTheMiddle,s=e.selectedStock,d=e.hanldeSelectedTime,u=e.handleStockChange,h=e.setSelectStockIndex,m=e.selectedTime,b=e.stocks,x=e.setStocks,g=e.strategiesData;return Object(k.jsx)(me.a,{sx:{maxHeight:t-20-25,margin:"10px 0px",overflowX:"auto"},children:Object(k.jsxs)(de.a,{sx:{minWidth:"300px"},ref:a,stickyHeader:!0,"aria-label":"sticky table",children:[Object(k.jsx)(be.a,{children:Object(k.jsx)(xe.a,{children:[{label:"Symbol",numeric:!1},{label:"Sources",numeric:!1},{label:"Description",numeric:!1},{label:"Time",numeric:!1}].concat(Object(l.a)((null===g||void 0===g?void 0:g.length)?Object(l.a)(new Set(g.map((function(e){return e.name})))).map((function(e){return{label:e,numeric:!1}})):[])).map((function(e,t){return Object(k.jsx)(he.a,{sx:{minWidth:"100px"},align:(e.numeric,"center"),sortDirection:i===e.label&&o,children:Object(k.jsxs)(ce.a,{active:i===e.label,direction:i===e.label?o:"asc",onClick:r(e.label),children:[e.label,i===e.id?Object(k.jsx)(se.a,{component:"span",sx:ge.a,children:"desc"===o?"sorted descending":"sorted ascending"}):null]})},t)}))})}),Object(k.jsx)(ue.a,{children:b.map((function(e,t){return Object(k.jsx)(ve,{row:e,index:t,selectedStock:s,handleStockChange:u,setSelectStockIndex:h,selectedTime:m,placeSelectedItemInTheMiddle:c,setStocks:x,stocks:b,hanldeSelectedTime:d,selectedStrategy:n,strategiesData:g},t)}))})]})})},fe=Object(k.jsx)(re.a,{fontSize:"small"}),pe=Object(k.jsx)(ne.a,{fontSize:"small"}),ye=function(e){var t=e.handleStockChange,a=e.selectedStock,r=e.stocks,o=e.setStocks,d=e.height,u=e.scrollableListRef,h=e.placeSelectedItemInTheMiddle,m=e.selectedCategory,b=e.setSelectedCategory,x=e.hanldeSelectedTime,v=e.setLayout,f=e.layout,p=e.setSidebarWidth,y=e.sidebarWidth,O=e.enableDualChart,w=e.selectedStrategy,S=e.setSelectedStrategy,C=e.secondaryLayout,_=e.setSecondaryLayout,M=e.strategiesData,D=Object(n.useState)([]),L=Object(s.a)(D,2),T=L[0],A=L[1],E=Object(n.useState)([]),H=Object(s.a)(E,2),F=H[0],I=H[1],W=Object(n.useState)(0),B=Object(s.a)(W,2),z=B[0],N=B[1],R=Object(n.useState)(!1),P=Object(s.a)(R,2),U=P[0],X=P[1],V=Object(n.useState)({name:"1d",desc:"1 Day",ms:864e5}),q=Object(s.a)(V,2),J=q[0],K=q[1];Object(n.useEffect)((function(){X(!0),g("/stocks/watchlish").then((function(e){var t;I((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.list)||[]),X(!1)})).catch((function(){X(!1)})),g("/stocks/active_strategies").then((function(e){var t;A((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.list)||[]),X(!1)})).catch((function(){X(!1)}))}),[]),Object(n.useEffect)((function(){g("stocks/watchlish/"+m).then((function(e){var a,n;o((null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.list)||[]),N(0),t(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.list[0])}))}),[m]);var Y=function(e){38===e.keyCode?(x(J),t(r[z-1]),N(z-1),h(z-1)):40===e.keyCode&&(x(J),t(r[z+1]),N(z+1),h(z+1))},Z=i.a.useState("asc"),$=Object(s.a)(Z,2),Q=$[0],te=$[1],ae=i.a.useState("Symbol"),ne=Object(s.a)(ae,2),ie=ne[0],re=ne[1],ce=function(e){return function(t){se(t,e)}},se=function(e,t){var a=ie===t&&"asc"===Q;te(a?"desc":"asc"),re(t),o(function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(r.map((function(e){var t={};return w.forEach((function(a,n){var i,r,o,l=null===M||void 0===M||null===(i=M[n])||void 0===i||null===(r=i.data)||void 0===r||null===(o=r[e.name])||void 0===o?void 0:o.time;t[a]=l?new Date(l):null})),Object(c.a)(Object(c.a)({},e),{},{Symbol:e.name,Sources:e.sources[0],Description:e.description,Time:J.name},t)})),function(e,t,a){return"desc"===e?function(e,a){return le(e,a,t)}:function(e,a){return-le(e,a,t)}}(a?"desc":"asc",t)))},de=Object(n.useMemo)((function(){return Object(k.jsxs)(G.a,{container:!0,style:{margin:"0px 6px"},children:[Object(k.jsxs)(G.a,{container:!0,item:!0,md:12,sm:12,xs:12,spacing:2,children:[Object(k.jsx)(G.a,{item:!0,md:3,sm:3,xs:3,children:Object(k.jsx)(ee,{options:F,value:m,label:"Categrories",handleChange:b,selectedStock:a})}),Object(k.jsx)(G.a,{item:!0,md:2,sm:2,xs:2,children:Object(k.jsx)(ee,{options:j,value:J,label:"Time",handleChange:function(e){K(e),x(e)},selectedStock:a,getOptionLabel:function(e){return e?null===e||void 0===e?void 0:e.name:""}})}),Object(k.jsx)(G.a,{item:!0,md:7,sm:7,xs:7,children:Object(k.jsx)(ee,{options:T,value:w,label:"Strategies",handleChange:function(e){e&&e.length?S(Object(l.a)(e)):S([])},selectedStock:a,multiple:!0,renderOption:function(e,t,a){var n=null===a||void 0===a?void 0:a.selected;return Object(k.jsxs)("li",Object(c.a)(Object(c.a)({},e),{},{children:[Object(k.jsx)(oe.a,{icon:fe,checkedIcon:pe,checked:n}),t]}))}})})]}),Object(k.jsx)(G.a,{item:!0,md:12,sm:12,xs:12,children:Object(k.jsx)("div",{onKeyPress:Y,children:Object(k.jsx)(je,{height:d,scrollableListRef:u,selectedStrategy:w,orderBy:ie,createSortHandler:ce,order:Q,placeSelectedItemInTheMiddle:h,selectedStock:a,hanldeSelectedTime:x,handleStockChange:t,setSelectStockIndex:N,selectedTime:J,stocks:r,setStocks:o,strategiesData:M})})})]})}),[r,a,Q,ie,m,F,r,J,w,M,T,M.length]),ue=Object(n.useRef)(null),he=Object(n.useState)(!1),me=Object(s.a)(he,2),be=me[0],xe=me[1],ge=i.a.useCallback((function(e){if(be){var t=window.innerWidth-(ue.current.getBoundingClientRect().right-e.clientX)-10;O&&(t=Math.floor(t/2)),v(Object(c.a)(Object(c.a)({},f),{},{width:t,height:window.innerHeight-80})),_(Object(c.a)(Object(c.a)({},C),{},{width:t})),p(ue.current.getBoundingClientRect().right-e.clientX)}}),[be]),ve=i.a.useCallback((function(){xe(!1)}),[]),ye=i.a.useCallback((function(e){xe(!0)}),[]);return Object(n.useEffect)((function(){return window.addEventListener("mousemove",ge),window.addEventListener("mouseup",ve),function(){window.removeEventListener("mousemove",ge),window.removeEventListener("mouseup",ve)}}),[ge,ve]),Object(n.useEffect)((function(){return window.addEventListener("keydown",Y),function(){window.removeEventListener("keydown",Y)}})),Object(k.jsxs)("div",{ref:ue,className:"app-sidebar",style:{width:y+"px",height:"calc(100vh - ".concat(52,"px")},onMouseDown:function(e){return e.preventDefault()},children:[U?Object(k.jsx)("div",{className:"watchListLoader"}):Object(k.jsx)(k.Fragment,{}),Object(k.jsx)("div",{className:"app-sidebar-resizer",onMouseDown:ye}),Object(k.jsx)("div",{className:"app-sidebar-content",style:{overflowX:"clip"},children:de})]})},Oe=Object(d.a)((function(){return{container:function(e){return{width:"calc(100% - ".concat(e,"px)")}}}}));var ke=function(e){var t=e.dataBaseUrl,a=Object(n.useState)([]),r=Object(s.a)(a,2),o=r[0],d=r[1],u=Object(n.useState)(6),h=Object(s.a)(u,2),m=h[0],b=h[1],x=Oe(m),g=Object(n.useState)("candlestick"),j=Object(s.a)(g,2),f=j[0],y=j[1],O=Object(n.useState)("FOREX"),w=Object(s.a)(O,2),S=w[0],C=w[1],_=Object(n.useState)(!0),M=Object(s.a)(_,2),D=M[0],L=M[1],T=Object(n.useState)(!1),A=Object(s.a)(T,2),E=A[0],H=A[1],F=Object(n.useState)(Object(c.a)({},v)),I=Object(s.a)(F,2),W=I[0],B=I[1],z=Object(n.useRef)(null),N=Object(n.useState)("MMM"),R=Object(s.a)(N,2),P=R[0],G=R[1],X=Object(n.useState)(null),V=Object(s.a)(X,2),q=V[0],J=V[1],K=Object(n.useState)([]),Y=Object(s.a)(K,2),Z=Y[0],$=Y[1],Q=Object(n.useState)({name:"1d",ms:864e5,desc:"1 Day"}),ee=Object(s.a)(Q,2),ae=ee[0],ne=ee[1],ie=Object(n.useState)(Object(c.a)(Object(c.a)({},W),{},{width:"50%",height:window.innerHeight-80})),re=Object(s.a)(ie,2),oe=re[0],le=re[1],ce=Object(n.useState)(p),se=Object(s.a)(ce,2),de=se[0],ue=se[1],he=Object(n.useState)(0),me=Object(s.a)(he,2),be=me[0],xe=me[1],ge=Object(n.useState)([]),ve=Object(s.a)(ge,2),je=ve[0],fe=ve[1];i.a.useEffect((function(){window.addEventListener("resize",(function(){var e;W.width===window.innerWidth-10&&W.height===window.innerHeight-80||(null===(e=document.querySelector('[data-title="Autoscale"]'))||void 0===e||e.click(),B(Object(c.a)(Object(c.a)({},W),{},{width:window.innerWidth-10,height:window.innerHeight-80})))}))}),[window.innerWidth,window.innerHeight]);var pe=function(e){G(e)},ke=function(e){"1d"!==(null===e||void 0===e?void 0:e.name)&&L(!1),ne(e)};return Object(k.jsxs)("div",{className:"app-container",children:[Object(k.jsxs)("div",{className:x.container+" app-frame",children:[Object(k.jsx)(te,{setEnableDualChart:H,enableDualChart:E,handleGrapthType:function(e){y(e)},graphType:f,templateChange:function(e){ue(e)},selectedStock:P,handleStockChange:pe,handlePatternChange:function(e){J(e),fe([]),$([])},selectedTime:ae,hanldeSelectedTime:ke,selectedTemp:de,selectedPattern:q,handlSwitchToggle:function(e){xe(e)},switchToggle:be,toggleFirstDayLine:D,setToggleFirstDayLine:L,dataBaseUrl:t}),Object(k.jsx)("div",{style:{height:"100vh",overflowY:"hidden"},children:Object(k.jsx)(U,{layout:W,enableDualChart:E,graphType:f,selectedTemp:de,toggleFirstDayLine:D,switchToggle:be,selectedPattern:q,selectedStock:P,setLayout:B,selectedTime:ae,selectedCategory:S,selectedStrategy:je,sidebarWidth:m,secondaryLayout:oe,setSecondaryLayout:le,dataBaseUrl:t,setStrategiesData:$,strategiesData:Z})})]}),Object(k.jsx)(ye,{selectedStock:P,handleStockChange:pe,stocks:o,setStocks:d,height:W.height,scrollableListRef:z,placeSelectedItemInTheMiddle:function(e){var t=315+21*e;z.current.scrollTo(t,0)},selectedCategory:S,setSelectedCategory:C,hanldeSelectedTime:ke,setLayout:B,layout:W,setSidebarWidth:b,sidebarWidth:m,enableDualChart:E,selectedStrategy:je,setSelectedStrategy:function(e){fe(Object(l.a)(e)),J(null)},secondaryLayout:oe,setSecondaryLayout:le,strategiesData:Z})]})},we=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,1673)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;a(e),n(e),i(e),r(e),o(e)}))},Se=a(1652),Ce=a(1663),_e=a(736),Me=a(1651),De="#901f61",Le=Object(_e.a)(Object(Me.a)({palette:{primary:{main:De,light:"#901f6117"},secondary:{main:"#829ae621"}},typography:{fontSize:12,fontFamily:"Arial",fontWeightLight:400,fontWeightRegular:500,fontWeightMedium:600,h1:{fontSize:26,wordBreak:"break-all"},h2:{fontSize:24,wordBreak:"break-all"},h3:{fontSize:22,wordBreak:"break-all"},h4:{fontSize:20,wordBreak:"break-all"},h5:{fontSize:18,wordBreak:"break-all"},h6:{fontSize:18,wordBreak:"break-all"},subtitle1:{fontSize:20,fontWeight:"bold",wordBreak:"break-all"},subtitle2:{wordBreak:"break-all"},body1:{wordBreak:"break-all"},body2:{fontSize:13,wordBreak:"break-all"}},props:{MuiTextField:{variant:"standard",margin:"8px"},MuiTooltip:{placement:"bottom",arrow:!0}},overrides:{MuiInput:{input:{fontSize:12}},MuiInputLabel:{root:{fontSize:12}},MuiTooltip:{tooltip:{fontSize:"10px",color:"white",backgroundColor:De},arrow:{color:De,backgroundColor:"white"}},MuiCheckbox:{colorSecondary:{"&$checked":{color:De}}},MuiTableCell:{root:{padding:"8px",fontSize:"12px",minWidth:"10px",maxWidth:"10px",width:"10px"},head:{background:"#484848",color:"white",minWidth:"10px",maxWidth:"10px",width:"10px"}}}})),Te=a(29);o.a.render(Object(k.jsx)(i.a.StrictMode,{children:Object(k.jsx)(Se.a,{injectFirst:!0,children:Object(k.jsx)(Ce.a,{theme:Le,children:Object(k.jsx)(K.a,{children:Object(k.jsxs)(Te.c,{children:[Object(k.jsx)(Te.a,{path:"/",element:Object(k.jsx)(ke,{dataBaseUrl:""})}),Object(k.jsx)(Te.a,{path:"/db_v1",element:Object(k.jsx)(ke,{dataBaseUrl:"/db_v1"})})]})})})})}),document.getElementById("root")),we()},293:function(e,t,a){},757:function(e,t,a){},977:function(e,t){},979:function(e,t){}},[[1580,1,2]]]);
//# sourceMappingURL=main.83b1e464.chunk.js.map